# ArgoCD Helm Chart Values
# Configured for k3d master cluster with NodePort service
# Access via localhost:9080 (works with Tailscale SSH tunneling)

# Server configuration
server:
  # Service configuration - NodePort
  service:
    type: NodePort
    nodePortHttp: 30090
    nodePortHttps: 30091

  # Disable TLS (insecure mode for local development)
  extraArgs:
    - --insecure

  # Metrics service
  metrics:
    enabled: true
    service:
      type: ClusterIP

# Server insecure mode
configs:
  params:
    server.insecure: true

  # RBAC configuration
  # Fix for "Unable to load data: permission denied" error
  rbac:
    # Default policy for authenticated users
    # role:admin = full access (recommended for local development)
    # role:readonly = read-only access (for production)
    policy.default: role:admin

    # Custom RBAC policies (optional - uncomment to add custom roles)
    # policy.csv: |
    #   p, role:developer, applications, *, */*, allow
    #   p, role:developer, repositories, *, *, allow
    #   g, my-team, role:developer
